<?xml version="1.0"?>
<project default="storeless" basedir="../..">

    <property name="properties.dir" value="tools/ant/properties"/>

    <!-- User settings -->
    <property file="${user.home}/ant.properties"/>
    <!-- Significant dirs -->
    <property file="${properties.dir}/dirs.properties"/>
    <!-- Compiler settings -->
    <property file="${properties.dir}/modern.properties"/>
    <!-- Parser properties -->
    <property file="${properties.dir}/parser.properties"/>
    <!-- Compile-time classpath properties files -->
    <property file="${properties.dir}/extrapath.properties"/>

    <target name="storeless" description="Build storeless engine support code">

        <mkdir dir="${out.storeless.dir}"/>

        <copy todir="${out.storeless.dir}/${splice.package}">
            <fileset dir="${derby.storeless.src.dir}/${splice.package}">
                <include name="modules.properties"/>
            </fileset>
        </copy>

        <javac
                source="1.7"
                target="1.7"
                bootclasspath="${empty}"
                nowarn="on"
                debug="${debug}"
                depend="${depend}"
                deprecation="${deprecation}"
                optimize="${optimize}"
                proceed="${proceed}"
                verbose="${verbose}"
                srcdir="${derby.storeless.src.dir}"
                destdir="${out.storeless.dir}">
            <classpath>
                <pathelement path="${out.dir}"/>
                <pathelement path="${main.classpath}"/>
            </classpath>
        </javac>
    </target>

</project>

