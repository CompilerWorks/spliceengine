option java_package = "com.splicemachine.coprocessor";
option java_outer_classname = "SpliceMessage";
option java_generic_services = true;
option java_generate_equals_and_hash = true;
option optimize_for = SPEED;

import "Client.proto";

message TaskStats {
	optional uint64 totalTime = 1;
	optional uint64 totalRowsProcessed = 2;
	optional uint64 totalRowsWritten = 3;
}

message SpliceObserverInstructions {

}


message SpliceOperationRequest {
	optional Scan scan = 1;
	optional SpliceObserverInstructions soi = 2;
}

message SpliceSchedulerRequest {
}

message SpliceSchedulerResponse {
}


service SpliceDerbyCoprocessor {

}

message DeleteFirstAfterRequest{

}

message WriteResult {

}


message BulkWriteResponse {
	optional bytes bytes = 1;
}

message BulkWriteRequest {
	optional bytes bytes = 1;
}

message DropIndexRequest {
	optional uint64 indexConglomId = 1;
	optional uint64 baseConglomId = 2;
}

message DropIndexResponse {
}


service SpliceIndex {
	rpc bulkWrite(BulkWriteRequest)
	  returns (BulkWriteResponse);
	rpc deleteFirstAfter(DeleteFirstAfterRequest)
	  returns (WriteResult); 
}

service SpliceIndexManagement {
	rpc dropIndex(DropIndexRequest) 
	  returns (DropIndexResponse);	
}

service SpliceOperation {
	rpc run(SpliceOperationRequest)
	  returns (TaskStats);
}

service SpliceScheduler {
	rpc submit(SpliceSchedulerRequest)
	  returns (SpliceSchedulerResponse);
}
